#include <SDL/SDL.h>#include <stdio.h>#include <stdlib.h>// Definições da tela#define SCREEN_W     640#define SCREEN_H     480#define SCREEN_BPP   16#define SCREEN_FLAGS 0typedef struct{	// Altura padrão do sprite	short height;		// Width padrão do sprite	short width;		// Numero de movimentos (andando, pulando, pra dir, pra esq)	char movements;} Sprite;int main(){	// Tela principal do jogo	SDL_Surface * screen;		// Fundo da tela	SDL_Surface * background;		// sprite com o boneco	SDL_Surface * sprite;		// Retangulos temporarios para screen, background e sprite	SDL_Rect scr_rect, back_rect, spr_rect;		// Configura as medidas do sprite do bandit	Sprite bandit;	bandit.height = 80;	bandit.width = 80;	bandit.movements = 7;	// O bandit tem 7 movimentos, mas para cada um existe um número diferent	// de frames		// Inicia a bagaca	if(SDL_Init(SDL_INIT_VIDEO) != 0)	{		printf("Erro ao iniciar SDL: %s\n", SDL_GetError());		return 1;	}		// Inicia o Video	screen = SDL_SetVideoMode(SCREEN_W, SCREEN_H, SCREEN_BPP, SCREEN_FLAGS);	if(!screen)	{		printf("Erro ao iniciar o modo de video: %s\n", SDL_GetError());		return 1;	}		// Carrega o fundo	background = SDL_LoadBMP("background.bmp");	if(!background)	{		printf("Erro ao carregar background: %s\n", SDL_GetError());		return 1;	}		// Carrega a sprite	//sprite = IMG_LoadBMP_RW("bandit_0.bmp");	sprite = SDL_LoadBMP("bandit_03.bmp");	if(!sprite)	{		printf("Erro ao carregar bandit: %s\n", SDL_GetError());		return 1;	}		// Faz o colorkey na imagem, tudo que for 0,0,0	SDL_SetColorKey(sprite, SDL_SRCCOLORKEY, (Uint32)SDL_MapRGB(sprite->format ,0, 0, 0));		int i = 0;	short p[] = {0, 80, 2*80, 3*80, 4*80, 5*80, 6*80, 7*80, 8*80, 9*80};	for(; i < 100; i++)	{		// Desenha o background na screen, pra limpar a screen		back_rect.x = 0; 		back_rect.y = 0;		back_rect.w = background->w;		back_rect.h = background->h;			scr_rect.x = 0;		scr_rect.y = 0;		scr_rect.w = background->w;		scr_rect.h = background->h;			SDL_BlitSurface(background, &back_rect, screen, &scr_rect);				// Prepara pra desenhar todos os movimentos do boneco na tela		// o width e height sempre serão os mesmos, logo		scr_rect.w = spr_rect.w = bandit.width;		scr_rect.h = spr_rect.h = bandit.height;				// O eixo y da screen também permanecerá o mesmo, logo		scr_rect.y = 0;		// Abaixo será alterado somente o necessário para a animação			// Desenha o primeiro movimento		scr_rect.x = spr_rect.y = 0; // Posiciona no inicio da tela		spr_rect.x = p[i % 8];		 // Pega frame i do primeiro movimento		SDL_BlitSurface(sprite, &spr_rect, screen, &scr_rect);				// Desenha o segundo movimento		// Posiciona 80 pixels mais a direita na tela e		// Pega o boneco 80 pixels abaixo na sprite		spr_rect.y = scr_rect.x = 80;		spr_rect.x = p[i % 6];		SDL_BlitSurface(sprite, &spr_rect, screen, &scr_rect);				// Desenha o terceiro movimento		// Posiciona 160 pixels mais a direita na tela e		// Pega o boneco 80 pixels abaixo na sprite		spr_rect.y = scr_rect.x = 160;		spr_rect.x = p[i % 9];		SDL_BlitSurface(sprite, &spr_rect, screen, &scr_rect);				// Desenha o quarto movimento		// Posiciona 240 pixels mais a direita na tela e		// Pega o boneco 80 pixels abaixo na sprite		spr_rect.y = scr_rect.x = 240;		spr_rect.x = p[i % 10];		SDL_BlitSurface(sprite, &spr_rect, screen, &scr_rect);				// Desenha o quinto movimento		// Posiciona 80 pixels mais a direita na tela e		// Pega o boneco 80 pixels abaixo na sprite		spr_rect.y = scr_rect.x = 320;		spr_rect.x = p[i % 10];		SDL_BlitSurface(sprite, &spr_rect, screen, &scr_rect);				// Desenha o sexto movimento		// Posiciona 80 pixels mais a direita na tela e		// Pega o boneco 80 pixels abaixo na sprite		spr_rect.y = scr_rect.x = 400;		spr_rect.x = p[i % 10];		SDL_BlitSurface(sprite, &spr_rect, screen, &scr_rect);				// Desenha o segundo movimento		// Posiciona 80 pixels mais a direita na tela e		// Pega o boneco 80 pixels abaixo na sprite		spr_rect.y = scr_rect.x = 480;		spr_rect.x = p[i % 7];		SDL_BlitSurface(sprite, &spr_rect, screen, &scr_rect);			// Atualiza a janela toda		SDL_UpdateRect(screen, 0, 0, 0, 0);			// Mostra por uns 10 segundos		SDL_Delay(100);	}		// Libera recursos das surfaces	SDL_FreeSurface(screen);	SDL_FreeSurface(background);	SDL_FreeSurface(sprite);	//	printf("Funfando! | \n");			// Finaliza o SDL	SDL_Quit();	return 0;}